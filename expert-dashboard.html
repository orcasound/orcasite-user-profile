<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Expert Dashboard — OrcaSound Prototype</title>
  <link rel="stylesheet" href="css/styles.css">
</head>
<body class="landing-dark">
  <header class="topbar">
    <div class="topbar-inner">
      <a class="conservancy" href="https://orcasound.net/" target="_blank">ORCA CONSERVANCY</a>
      <div id="authControls" class="auth-controls"></div>
    </div>
  </header>
  <nav class="subnav">
    <div class="subnav-inner">
      <a href="index.html">Orcasound</a>
      <a href="hydrophones.html">Hydrophones</a>
      <a href="explore.html">Explore</a>
      <a href="take-action.html">Take action</a>
    </div>
  </nav>

  <main class="container single-col">
    <h2>Expert User Dashboard</h2>
    <nav class="dash-tabs" id="expertDashTabs">
      <button class="dash-tab active" data-tab="reportsTab">Evaluate Candidates</button>
      <button class="dash-tab" data-tab="confirmedTab">Confirmed Candidates</button>
      <button class="dash-tab" data-tab="shiftsTab">Listening Shifts</button>
      <button class="dash-tab" data-tab="expertMyDataTab">My Data</button>
    </nav>
    <div class="tab-panes">
      <div class="tab-pane active" id="reportsTab">
        <div class="reporting-layout">
          <section class="dash-panel" id="aggregateMetricsPanel">
            <h3>Aggregate Metrics</h3>
            <div class="panel-body" id="aggregateMetricsBody">Loading...</div>
          </section>
          <div class="reporting-left">
          <section class="dash-panel" id="userReportsManagePanel">
        <h3>User Reports Management</h3>
        <div class="filter-bar" id="reportManageFilters">
          <label>Type:
            <select id="manageTypeFilter">
              <option value="all">All</option>
              <option value="whale">Whale</option>
              <option value="vessel">Vessel</option>
              <option value="other">Other</option>
            </select>
          </label>
          <label>Sort:
            <select id="manageSort">
              <option value="newest">Newest</option>
              <option value="oldest">Oldest</option>
              <option value="type">Type</option>
            </select>
          </label>
          <label><input type="checkbox" id="groupByType" /> Group by type</label>
          <label>Search: <input type="text" id="manageSearch" placeholder="text or mm:ss" /></label>
        </div>
        <div class="batch-bar" id="manageBatchBar">
          <button class="mini-btn" id="batchSelectAll">Select All</button>
          <button class="mini-btn" id="batchClear">Clear</button>
          <button class="mini-btn" id="batchCandidate">Mark Candidate</button>
          <button class="mini-btn" id="batchUncandidate">Unmark Candidate</button>
          <button class="mini-btn" id="batchConfirmReports">Batch Confirm</button>
        </div>
        <div class="panel-body" id="userReportsManageList">Loading...</div>
      </section>
          </div>
          <div class="reporting-right">
            <section class="dash-panel" id="reportDetailPanel">
              <h3>Report Audio Controls</h3>
              <div class="panel-body" id="reportDetailBody">
                <div class="detail-placeholder">Select a report to view audio and details.</div>
              </div>
            </section>
            <section class="dash-panel" id="activityPanel">
              <h3>Recent Activity</h3>
              <div class="panel-body" id="activityList">Loading...</div>
            </section>
          </div>
        </div>
      </div>
      <div class="tab-pane" id="confirmedTab">
        <div class="reporting-layout">
          <div class="reporting-left">
            <section class="dash-panel" id="candidateReportsPanel">
              <h3>Candidate Reports</h3>
              <div class="candidate-tools"><button class="mini-btn" id="exportCandidatesBtn">Export JSON</button></div>
              <div class="panel-body" id="candidateReportsList">Loading...</div>
            </section>
          </div>
          <div class="reporting-right">
            <section class="dash-panel" id="reportDetailPanelClone">
              <h3>Report Audio Controls</h3>
              <div class="panel-body" id="reportDetailBodyClone">
                <div class="detail-placeholder">Select a report to view audio and details.</div>
              </div>
            </section>
            <section class="dash-panel" id="activityPanelClone">
              <h3>Recent Activity</h3>
              <div class="panel-body" id="activityListClone">Loading...</div>
            </section>
          </div>
        </div>
      </div>
      <div class="tab-pane" id="shiftsTab">
        <section class="dash-panel" id="listeningShiftsPanel">
          <h3>Listening Shifts</h3>
          <div class="shift-controls">
            <div class="shift-form" id="shiftForm">
              <label>Week Day:
                <select id="shiftDay">
                  <option value="0">Sunday</option>
                  <option value="1">Monday</option>
                  <option value="2">Tuesday</option>
                  <option value="3">Wednesday</option>
                  <option value="4">Thursday</option>
                  <option value="5">Friday</option>
                  <option value="6">Saturday</option>
                </select>
              </label>
              <label>Start Time:
                <select id="shiftStartTime"></select>
              </label>
              <label>End Time:
                <select id="shiftEndTime"></select>
              </label>
              <button id="addShiftBtn">Add Shift</button>
              <button id="clearShiftFormBtn" type="button" class="secondary">Clear</button>
              <input type="hidden" id="editingShiftId" />
            </div>
            <div class="calendar-nav">
              <button id="weekPrevBtn" type="button">◀</button>
              <span id="weekLabel"></span>
              <button id="weekNextBtn" type="button">▶</button>
            </div>
            <div class="week-calendar" id="shiftCalendar">
              <div class="week-header" id="weekHeader"></div>
              <div class="week-body" id="weekBody">Loading week...</div>
            </div>
          </div>
          <div class="panel-body" id="shiftList">No shifts yet.</div>
          <div class="shift-summary" id="shiftSummary"></div>
          <div class="shift-legend" id="shiftLegend"></div>
        </section>
      </div>
      <div class="tab-pane" id="expertMyDataTab">
        <section class="scoreboard" id="scoreBoard">
          <div class="metric" id="mComments"><span class="num">0</span><span class="label">Comments</span></div>
          <div class="metric" id="mReports"><span class="num">0</span><span class="label">Reports</span></div>
          <div class="metric" id="mConfirmed"><span class="num">0</span><span class="label">Confirmed <span class="metric-weight" title="Each confirmation counts 3x toward score" aria-label="Confirmation weight triple">x3</span></span></div>
          <div class="metric" id="mChecked"><span class="num">0</span><span class="label">Audio Checked</span></div>
          <div class="metric" id="mTags"><span class="num">0</span><span class="label">Unique Tags</span></div>
          <div class="metric total" id="mScore"><span class="num">0</span><span class="label">Score</span></div>
        </section>
        <div class="score-legend" id="scoreLegend"><span class="legend-label">Scoring:</span> Confirmations weighted <strong>3×</strong> (badge shows multiplier).</div>
        <section class="triple-grid">
          <div class="triple-col" id="colReports">
            <h3 class="tri-title">Your Reports</h3>
            <div class="tri-body" id="userReports">Loading...</div>
          </div>
          <div class="triple-col" id="colComments">
            <h3 class="tri-title">Your Comments</h3>
            <div class="tri-body" id="commentList">Loading...</div>
          </div>
          <div class="triple-col" id="colFavorites">
            <h3 class="tri-title">Favorites</h3>
            <div class="tri-body" id="favList">Loading...</div>
          </div>
        </section>
        <section class="dash-panel" id="activityPanelMyData">
          <h3>Recent Activity</h3>
          <div class="panel-body" id="activityList">Loading...</div>
        </section>
      </div>
    </div>
  </main>

  <footer class="site-footer"><div>Prototype — not a production site.</div></footer>
  <script src="js/activity.js" defer></script>
  <script src="js/app.js" defer></script>
  <script src="js/auth.js" defer></script>
  <script src="js/dashboard.js" defer></script>
</body>
</html>
